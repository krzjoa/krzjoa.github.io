<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us>
<head>
<link href=https://gmpg.org/xfn/11 rel=profile>
<meta charset=utf-8>
<meta name=generator content="Hugo 0.88.1">
<meta name=viewport content="width=device-width,initial-scale=1">
<title>matricks 0.8.2 available on CRAN &#183; krzjoa</title>
<meta name=description content>
<link type=text/css rel=stylesheet href=/css/print.css media=print>
<link type=text/css rel=stylesheet href=/css/poole.css>
<link type=text/css rel=stylesheet href=/css/syntax.css>
<link type=text/css rel=stylesheet href=/css/hyde.css>
<link rel=stylesheet href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">
<link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png>
<link rel="shortcut icon" href=/favicon.png>
<link rel=stylesheet href=//use.fontawesome.com/releases/v5.14.0/css/all.css>
</head>
<body class=theme-base-custom>
<aside class=sidebar>
<div class="container sidebar-sticky">
<div class=sidebar-about>
<a href=/><h1>krzjoa</h1></a>
<p class=lead>
</p>
</div>
<nav>
<ul class=sidebar-nav>
<li><a href=/>Home</a> </li>
<li><a href=/projects/> Projects </a></li><li><a href=/publications/> Publications </a></li>
</ul>
</nav>
<p>
<a href=https://github.com/krzjoa rel=me><i class="fab fa-github fa-lg" aria-hidden=true></i></a>
<a href=https://linkedin.com/in/krzysztof-joachimiak rel=me><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a>
<a href="https://scholar.google.com/citations?user=qNcWYHIAAAAJ%26hl" rel=me><i class="fas fa-graduation-cap fa-lg" aria-hidden=true></i></a>
<a href=https://orcid.org/0000-0003-4780-7947 rel=me><i class="fab fa-orcid fa-lg" aria-hidden=true></i></a>
<a href=/post/index.xml rel=me><i class="fas fa-rss fa-lg" aria-hidden=true></i></a>
</p>
<p>&copy; 2021. All rights reserved.</p>
</div>
</aside>
<main class="content container">
<div class=post>
<h1>matricks 0.8.2 available on CRAN</h1>
<time datetime=2020-02-29T00:00:00Z class=post-date>Feb 29, 2020</time>
<i class="fas fa-tags"></i>
<a class="badge badge-tag" href=/tags/en>en</a>
<a class="badge badge-tag" href=/tags/r>r</a>
<a class="badge badge-tag" href=/tags/matricks>matricks</a>
<a class="badge badge-tag" href=/tags/algebra>algebra</a>
<br><br>
<p><a href=https://krzjoa.github.io/matricks><img src=https://raw.githubusercontent.com/krzjoa/matricks/master/man/figures/logo.png align=right height=139 style=height:139px></a>
<code>matricks</code> package in <strong>0.8.2</strong> version has been released on CRAN! In
this post I will present you, what are advantages of using <code>matricks</code>
and how you can use it.</p>
<h3 id=creating-matrices>Creating matrices</h3>
<p>The main function the package started with is <code>m</code>. It’s a smart shortcut
for creating matrices, especially usefull if you want to define a matrix
by enumerating all the elements row-by-row. Typically, if you want to
create a matrix in R, you can do it using <code>base</code> function called
<code>matrix</code>.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=color:#a6e22e>matrix</span>(<span style=color:#a6e22e>c</span>(<span style=color:#ae81ff>3</span> ,<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>7</span>,
         <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>0</span>,
         <span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>1</span>), nrow <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>, byrow <span style=color:#f92672>=</span> <span style=color:#66d9ef>TRUE</span>)
</code></pre></div><pre><code>##      [,1] [,2] [,3]
## [1,]    3    4    7
## [2,]    5    8    0
## [3,]    9    2    1
</code></pre>
<p>Although it’s a very simple opeartion, the funtion call doesn’t look
tidy. Alternaively, we can use <code>tibble</code> with its <code>frame_matrix</code>
function, defining column names with formulae first.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=color:#a6e22e>library</span>(tibble)
<span style=color:#a6e22e>frame_matrix</span>(<span style=color:#f92672>~</span> c1, <span style=color:#f92672>~</span> c2, <span style=color:#f92672>~</span> c3,
                <span style=color:#ae81ff>3</span>,    <span style=color:#ae81ff>4</span>,    <span style=color:#ae81ff>7</span>,
                <span style=color:#ae81ff>5</span>,    <span style=color:#ae81ff>8</span>,    <span style=color:#ae81ff>0</span>,
                <span style=color:#ae81ff>9</span>,    <span style=color:#ae81ff>2</span>,    <span style=color:#ae81ff>1</span>)
</code></pre></div><pre><code>##      c1 c2 c3
## [1,]  3  4  7
## [2,]  5  8  0
## [3,]  9  2  1
</code></pre>
<p>However, it’s still not a such powerfull tool as <code>matricks::m</code> function
is. Let’s see an example.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=color:#a6e22e>library</span>(matricks)
<span style=color:#a6e22e>m</span>(<span style=color:#ae81ff>3</span> ,<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>7</span><span style=color:#f92672>|</span>
  <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>0</span><span style=color:#f92672>|</span>
  <span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>1</span>)
</code></pre></div><pre><code>##      [,1] [,2] [,3]
## [1,]    3    4    7
## [2,]    5    8    0
## [3,]    9    2    1
</code></pre>
<p>As simple as that! We join following rows using <code>|</code> operator. <code>m</code>
function is very flexible and offers you much more than before mentioned
ones.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=color:#a6e22e>m</span>(<span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>3</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>7</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>4</span>)
</code></pre></div><pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    6    7
## [3,]    2    1    4
</code></pre>
<p>And here and example with bindig multiple matrices together:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r>mat1   <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>diag</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>3</span>)
mat2  <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>antidiag</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>3</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>3</span>
<span style=color:#a6e22e>m</span>(mat1, mat2<span style=color:#f92672>|</span>
  mat2, mat1)
</code></pre></div><pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6]
## [1,]    1    0    0    0    0    3
## [2,]    0    1    0    0    3    0
## [3,]    0    0    1    3    0    0
## [4,]    0    0    3    1    0    0
## [5,]    0    3    0    0    1    0
## [6,]    3    0    0    0    0    1
</code></pre>
<p>By the way, <code>antidiag</code> function can be found in the <code>matricks</code> package
too.</p>
<h3 id=setting--accessing-values>Setting & accessing values</h3>
<p>These code</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r>mat <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>matrix</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>3</span>)
mat[1, <span style=color:#ae81ff>2</span>] <span style=color:#f92672>&lt;-</span> <span style=color:#ae81ff>0.3</span>
mat[2, <span style=color:#ae81ff>3</span>] <span style=color:#f92672>&lt;-</span> <span style=color:#ae81ff>7</span>
mat[3, <span style=color:#ae81ff>1</span>] <span style=color:#f92672>&lt;-</span> <span style=color:#ae81ff>13</span>
mat[2, <span style=color:#ae81ff>2</span>] <span style=color:#f92672>&lt;-</span> <span style=color:#ae81ff>0.5</span>
mat
</code></pre></div><pre><code>##      [,1] [,2] [,3]
## [1,]    0  0.3    0
## [2,]    0  0.5    7
## [3,]   13  0.0    0
</code></pre>
<p>can be replaced with:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r>mat <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>matrix</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>3</span>)
mat <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>set_values</span>(mat,
                  <span style=color:#a6e22e>c</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>) <span style=color:#f92672>~</span> <span style=color:#ae81ff>0.3</span>,
                  <span style=color:#a6e22e>c</span>(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>) <span style=color:#f92672>~</span> <span style=color:#ae81ff>7</span>,
                  <span style=color:#a6e22e>c</span>(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>1</span>) <span style=color:#f92672>~</span> <span style=color:#ae81ff>13</span>,
                  <span style=color:#a6e22e>c</span>(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span>) <span style=color:#f92672>~</span> <span style=color:#ae81ff>0.5</span>)
mat
</code></pre></div><pre><code>##      [,1] [,2] [,3]
## [1,]    0  0.3    0
## [2,]    0  0.5    7
## [3,]   13  0.0    0
</code></pre>
<p>In some cases, traditional way we access a matrix element in <code>R</code> may be
inconvenient. Consider situation shown below:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r>sample.matrix <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>matrix</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>3</span>)
matrix.indices <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>list</span>(<span style=color:#a6e22e>c</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>), <span style=color:#a6e22e>c</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>),
                       <span style=color:#a6e22e>c</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>3</span>), <span style=color:#a6e22e>c</span>(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span>),
                       <span style=color:#a6e22e>c</span>(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>1</span>), <span style=color:#a6e22e>c</span>(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>3</span>))

<span style=color:#a6e22e>for </span>(idx in matrix.indices) {
  sample.matrix[idx[1], idx[2]] <span style=color:#f92672>&lt;-</span> sample.matrix[idx[1], idx[2]] <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>
}

sample.matrix
</code></pre></div><pre><code>##      [,1] [,2] [,3]
## [1,]    3    3    3
## [2,]    1    3    1
## [3,]    3    1    3
</code></pre>
<p>It can be expressed conciser using matrix <code>at</code> function.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r>sample.matrix <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>matrix</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>3</span>)
matrix.indices <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>list</span>(<span style=color:#a6e22e>c</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>), <span style=color:#a6e22e>c</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>),
                       <span style=color:#a6e22e>c</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>3</span>), <span style=color:#a6e22e>c</span>(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span>),
                       <span style=color:#a6e22e>c</span>(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>1</span>), <span style=color:#a6e22e>c</span>(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>3</span>))

<span style=color:#a6e22e>for </span>(idx in matrix.indices) {
  <span style=color:#a6e22e>at</span>(sample.matrix, idx) <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>at</span>(sample.matrix, idx) <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>
}
sample.matrix
</code></pre></div><pre><code>##      [,1] [,2] [,3]
## [1,]    3    3    3
## [2,]    1    3    1
## [3,]    3    1    3
</code></pre>
<h3 id=plotting-matrix>Plotting matrix</h3>
<p><code>matrix</code> objects haven’t had good automatized plotting function until
now. Let’s create and plot a sample matrix of random values.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r>rmat <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>runifm</span>(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>3</span>)
<span style=color:#a6e22e>print</span>(rmat)
</code></pre></div><pre><code>##           [,1]      [,2]      [,3]
## [1,] 0.3248890 0.1024049 0.3295454
## [2,] 0.8077164 0.7267801 0.1116789
## [3,] 0.4406909 0.4703106 0.7047498
</code></pre>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=color:#a6e22e>plot</span>(rmat)
</code></pre></div><p><img src=/post/2020-02-29-matricks-release/runifm_print.png alt=png></p>
<p>And here the same using a matrix of random boolean values (<code>rboolm</code>).</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=color:#a6e22e>set.seed</span>(<span style=color:#ae81ff>7</span>)
rmat <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>rboolm</span>(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>3</span>)
<span style=color:#a6e22e>print</span>(rmat)
</code></pre></div><pre><code>##       [,1]  [,2]  [,3]
## [1,] FALSE  TRUE  TRUE
## [2,]  TRUE  TRUE FALSE
## [3,]  TRUE FALSE  TRUE
</code></pre>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=color:#a6e22e>plot</span>(rmat)
</code></pre></div><p><img src=/post/2020-02-29-matricks-release/rboolm_print.png alt=png></p>
<h3 id=operators>Operators</h3>
<p><code>matricks</code> contains a family of operators, which allows you to perform
column-/row-wise operation
(addition/subtraction/multiplication/division) between matrix and
vector.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r>mat <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>m</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span><span style=color:#f92672>|</span>
         <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>6</span><span style=color:#f92672>|</span>
         <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>9</span>)
mat
</code></pre></div><pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6
## [3,]    7    8    9
</code></pre>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r>vec <span style=color:#f92672>&lt;-</span> <span style=color:#a6e22e>v</span>(<span style=color:#ae81ff>1</span><span style=color:#f92672>:</span><span style=color:#ae81ff>3</span>)
vec
</code></pre></div><pre><code>##      [,1]
## [1,]    1
## [2,]    2
## [3,]    3
</code></pre>
<p>If we try to do a column-wise multiplication, we ecounter a problem.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r>mat <span style=color:#f92672>*</span> vec
</code></pre></div><pre><code>## Error in mat * vec: niezgodne tablice
</code></pre>
<p>We can bypass this error using <code>%m%</code> function. It does what we want!</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r>mat <span style=color:#f92672>%m%</span> vec
</code></pre></div><pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    8   10   12
## [3,]   21   24   27
</code></pre>
<p>There are also several other operators available.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r>mat <span style=color:#f92672>%d%</span> vec
</code></pre></div><pre><code>##          [,1]     [,2] [,3]
## [1,] 1.000000 2.000000    3
## [2,] 2.000000 2.500000    3
## [3,] 2.333333 2.666667    3
</code></pre>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r>mat <span style=color:#f92672>%+%</span> vec
</code></pre></div><pre><code>##      [,1] [,2] [,3]
## [1,]    2    3    4
## [2,]    6    7    8
## [3,]   10   11   12
</code></pre>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r>mat <span style=color:#f92672>%-%</span> vec
</code></pre></div><pre><code>##      [,1] [,2] [,3]
## [1,]    0    1    2
## [2,]    2    3    4
## [3,]    4    5    6
</code></pre>
<p>I encourage you to familiarize with <code>matricks</code>. Visit <a href=https://krzjoa.github.io/matricks>matrix
documentation</a> site and learn more!</p>
</div>
</main>
</body>
</html>